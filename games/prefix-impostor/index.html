<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>–ü—Ä–∏—Å—Ç–∞–≤–∫–∞-—Å–∞–º–æ–∑–≤–∞–Ω–µ—Ü</title>

<!-- Include shared header styles -->
<link rel="stylesheet" href="../../shared/header.css">

<style>
  /* Override shared header body styles for this game's dark theme */
  body {
    min-height: 100vh; min-height: 100dvh;
    background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
    font-family: -apple-system, 'Segoe UI', system-ui, sans-serif;
    color: #e8e6f0;
    display: flex; flex-direction: column; align-items: center;
    padding: 90px 16px 20px; overflow-x: hidden;
  }
  /* Style the shared header to match dark theme */
  .game-header {
    background: rgba(15, 12, 41, 0.95);
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
  }
  .game-title { color: #e8e6f0; }
  .back-button { background: linear-gradient(135deg, #7c3aed, #c084fc); }
  .back-button:hover { background: linear-gradient(135deg, #6d28d9, #a855f7); }

  @keyframes float { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }
  @keyframes slideUp { from { opacity:0; transform: translateY(20px); } to { opacity:1; transform: translateY(0); } }
  @keyframes shake { 0%,100%{transform:translateX(0)}20%{transform:translateX(-8px)}40%{transform:translateX(8px)}60%{transform:translateX(-5px)}80%{transform:translateX(5px)} }
  @keyframes popIn { 0%{transform:scale(.8);opacity:0}50%{transform:scale(1.1)}100%{transform:scale(1);opacity:1} }
  @keyframes popScore { 0%{transform:scale(1)}50%{transform:scale(1.4)}100%{transform:scale(1)} }
  @keyframes glow { 0%,100%{box-shadow:0 0 15px rgba(255,200,50,.3)}50%{box-shadow:0 0 30px rgba(255,200,50,.6)} }
  @keyframes fadeSlide { from{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)} }

  .screen { max-width: 520px; width: 100%; display: none; }
  .screen.active { display: block; }
  .btn {
    border: none; cursor: pointer; transition: all .2s ease;
    -webkit-appearance: none; appearance: none; font-family: inherit;
  }
  .btn:active { transform: scale(.97); }
  .main-btn {
    background: linear-gradient(135deg, #7c3aed, #c084fc);
    color: #fff; font-size: 18px; font-weight: 700; padding: 16px 48px;
    border-radius: 14px; box-shadow: 0 4px 20px rgba(124,58,237,.4);
    letter-spacing: .5px;
  }
  .opt-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px; }
  .opt-btn {
    background: rgba(255,255,255,.06); border: 1px solid rgba(255,255,255,.1);
    border-radius: 14px; padding: 16px 12px; color: #e8e6f0;
    font-size: 18px; font-weight: 700; text-align: center;
  }
  .opt-btn .hint { font-size: 13px; font-weight: 400; display: block; margin-top: 2px; opacity: .7; }
  .opt-btn.correct { background: rgba(34,197,94,.15); border: 2px solid #22c55e; color: #4ade80; animation: glow 1.5s ease infinite; }
  .opt-btn.wrong { background: rgba(239,68,68,.15); border: 2px solid #ef4444; color: #f87171; }
  .opt-btn.dimmed { background: rgba(255,255,255,.02); color: #5a5575; opacity: .4; }
  .opt-btn:disabled { cursor: default; }
  .card {
    background: rgba(255,255,255,.04); border-radius: 20px; padding: 28px 24px;
    text-align: center; margin-bottom: 24px;
    border: 1px solid rgba(255,255,255,.08);
  }
  .expl-box {
    border-radius: 16px; padding: 18px 20px; margin-bottom: 16px; text-align: center;
    animation: fadeSlide .4s ease;
  }
  .expl-box.ok { background: rgba(34,197,94,.08); border: 1px solid rgba(34,197,94,.2); }
  .expl-box.no { background: rgba(239,68,68,.08); border: 1px solid rgba(239,68,68,.2); }
  .history-item {
    display: flex; align-items: center; gap: 12px;
    border-radius: 12px; padding: 10px 14px; margin-bottom: 8px;
  }
  .history-item.ok { background: rgba(34,197,94,.06); border: 1px solid rgba(34,197,94,.15); }
  .history-item.no { background: rgba(239,68,68,.06); border: 1px solid rgba(239,68,68,.15); }
</style>
</head>
<body>
<!-- The header will be automatically injected here by header.js -->

<!-- START SCREEN -->
<div id="startScreen" class="screen active" style="text-align:center; animation: slideUp .6s ease;">
  <div style="font-size:72px; margin-bottom:8px; animation: float 3s ease-in-out infinite;">üïµÔ∏è</div>
  <h1 style="font-size:32px; font-weight:800; margin:0 0 8px;
    background:linear-gradient(135deg,#ffd700,#ff6b6b,#c084fc);
    -webkit-background-clip:text; -webkit-text-fill-color:transparent;">–ü—Ä–∏—Å—Ç–∞–≤–∫–∞-—Å–∞–º–æ–∑–≤–∞–Ω–µ—Ü</h1>
  <p style="font-size:15px; color:#a8a3c0; margin:0 0 28px; line-height:1.6;">
    –ö—Ç–æ-—Ç–æ –ø–µ—Ä–µ–ø—É—Ç–∞–ª –ø—Ä–∏—Å—Ç–∞–≤–∫–∏ –≤ –∏—Å–ø–∞–Ω—Å–∫–∏—Ö —Å–ª–æ–≤–∞—Ö!<br>–ù–∞–π–¥–∏ —Å–∞–º–æ–∑–≤–∞–Ω—Ü–∞ –∏ –ø–æ—Å—Ç–∞–≤—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é.
  </p>
  <div style="background:rgba(255,255,255,.06); border-radius:16px; padding:20px 24px; margin-bottom:28px; text-align:left; border:1px solid rgba(255,255,255,.08);">
    <div style="font-size:14px; font-weight:600; color:#c084fc; margin-bottom:12px;">–ö–∞–∫ –∏–≥—Ä–∞—Ç—å:</div>
    <div style="font-size:14px; color:#b8b3d0; line-height:1.8;">
      <span style="color:#ffd700">1.</span> –í–∏–¥–∏—à—å —Å–ª–æ–≤–æ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø—Ä–∏—Å—Ç–∞–≤–∫–æ–π<br>
      <span style="color:#ffd700">2.</span> –í—ã–±–∏—Ä–∞–µ—à—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∏–∑ —á–µ—Ç—ã—Ä—ë—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤<br>
      <span style="color:#ffd700">3.</span> –£–∑–Ω–∞—ë—à—å –∑–Ω–∞—á–µ–Ω–∏–µ —Å–ª–æ–≤–∞ –∏ –µ–≥–æ —á–∞—Å—Ç–µ–π
    </div>
  </div>
  <button class="btn main-btn" onclick="startGame()">¬°Empezar! ‚Üí</button>
  <div style="margin-top:12px; font-size:13px; color:#7a7590;">12 —Ä–∞—É–Ω–¥–æ–≤</div>
</div>

<!-- GAME SCREEN -->
<div id="gameScreen" class="screen">
  <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:16px;">
    <div style="font-size:13px; color:#8a84a8;">–†–∞—É–Ω–¥ <span id="roundNum" style="color:#e8e6f0;font-weight:700;">1</span> / 12</div>
    <div style="display:flex; gap:16px; align-items:center;">
      <div id="streakBadge" style="font-size:13px; color:#ffd700; font-weight:600; display:none;">üî• <span id="streakNum">0</span></div>
      <div id="scoreDisplay" style="font-size:20px; font-weight:800; color:#c084fc;">0</div>
    </div>
  </div>
  <div style="height:4px; background:rgba(255,255,255,.08); border-radius:2px; margin-bottom:28px; overflow:hidden;">
    <div id="progressBar" style="height:100%; width:0%; background:linear-gradient(90deg,#7c3aed,#c084fc); border-radius:2px; transition:width .5s ease;"></div>
  </div>
  <div id="wordCard" class="card" style="animation:popIn .4s ease;">
    <div style="font-size:12px; color:#f87171; font-weight:600; margin-bottom:12px; text-transform:uppercase; letter-spacing:1.5px;">‚ùå –°–ª–æ–≤–æ —Å –æ—à–∏–±–∫–æ–π</div>
    <div style="font-size:34px; font-weight:800; margin-bottom:6px;">
      <span id="fakePrefix" style="color:#f87171; text-decoration:line-through; text-decoration-thickness:2px;"></span><span id="rootDisplay" style="color:#e8e6f0;"></span>
    </div>
    <div style="font-size:13px; color:#7a7590; margin-top:8px;">
      –ö–æ—Ä–µ–Ω—å <span id="rootHint" style="color:#a8a3c0; font-weight:600;"></span> = <span id="rootMeaning"></span>
    </div>
  </div>
  <div style="text-align:center; font-size:15px; color:#b8b3d0; margin-bottom:16px; font-weight:500;">–ö–∞–∫–∞—è –ø—Ä–∏—Å—Ç–∞–≤–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è?</div>
  <div id="optionsGrid" class="opt-grid"></div>
  <div id="explanationArea" style="display:none;"></div>
</div>

<!-- RESULTS SCREEN -->
<div id="resultsScreen" class="screen" style="text-align:center;"></div>

<!-- Include shared header script -->
<script src="../../shared/header.js"></script>

<script>
const WORDS=[
  {word:"submarino",root:"marino",correctPrefix:"sub",meaning:"–ø–æ–¥–≤–æ–¥–Ω—ã–π",rootMeaning:"–º–æ—Ä—Å–∫–æ–π"},
  {word:"subterr√°neo",root:"terr√°neo",correctPrefix:"sub",meaning:"–ø–æ–¥–∑–µ–º–Ω—ã–π",rootMeaning:"–∑–µ–º–Ω–æ–π"},
  {word:"subrayar",root:"rayar",correctPrefix:"sub",meaning:"–ø–æ–¥—á—ë—Ä–∫–∏–≤–∞—Ç—å",rootMeaning:"—á–µ—Ä—Ç–∏—Ç—å"},
  {word:"subconsciente",root:"consciente",correctPrefix:"sub",meaning:"–ø–æ–¥—Å–æ–∑–Ω–∞—Ç–µ–ª—å–Ω—ã–π",rootMeaning:"—Å–æ–∑–Ω–∞—Ç–µ–ª—å–Ω—ã–π"},
  {word:"subt√≠tulo",root:"t√≠tulo",correctPrefix:"sub",meaning:"—Å—É–±—Ç–∏—Ç—Ä—ã",rootMeaning:"–∑–∞–≥–æ–ª–æ–≤–æ–∫"},
  {word:"extraterrestre",root:"terrestre",correctPrefix:"extra",meaning:"–∏–Ω–æ–ø–ª–∞–Ω–µ—Ç–Ω—ã–π",rootMeaning:"–∑–µ–º–Ω–æ–π"},
  {word:"extraordinario",root:"ordinario",correctPrefix:"extra",meaning:"–Ω–µ–æ–±—ã—á–∞–π–Ω—ã–π",rootMeaning:"–æ–±—ã—á–Ω—ã–π"},
  {word:"extraescolar",root:"escolar",correctPrefix:"extra",meaning:"–≤–Ω–µ—à–∫–æ–ª—å–Ω—ã–π",rootMeaning:"—à–∫–æ–ª—å–Ω—ã–π"},
  {word:"superh√©roe",root:"h√©roe",correctPrefix:"super",meaning:"—Å—É–ø–µ—Ä–≥–µ—Ä–æ–π",rootMeaning:"–≥–µ—Ä–æ–π"},
  {word:"supermercado",root:"mercado",correctPrefix:"super",meaning:"—Å—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç",rootMeaning:"—Ä—ã–Ω–æ–∫"},
  {word:"supervivencia",root:"vivencia",correctPrefix:"super",meaning:"–≤—ã–∂–∏–≤–∞–Ω–∏–µ",rootMeaning:"–∂–∏–∑–Ω—å"},
  {word:"sobrevivir",root:"vivir",correctPrefix:"sobre",meaning:"–≤—ã–∂–∏–≤–∞—Ç—å",rootMeaning:"–∂–∏—Ç—å"},
  {word:"sobrenatural",root:"natural",correctPrefix:"sobre",meaning:"—Å–≤–µ—Ä—Ö—ä–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π",rootMeaning:"–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π"},
  {word:"sobrecarga",root:"carga",correctPrefix:"sobre",meaning:"–ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞",rootMeaning:"–Ω–∞–≥—Ä—É–∑–∫–∞"},
  {word:"predecir",root:"decir",correctPrefix:"pre",meaning:"–ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å",rootMeaning:"–≥–æ–≤–æ—Ä–∏—Ç—å"},
  {word:"prehistoria",root:"historia",correctPrefix:"pre",meaning:"–ø—Ä–µ–¥—ã—Å—Ç–æ—Ä–∏—è",rootMeaning:"–∏—Å—Ç–æ—Ä–∏—è"},
  {word:"prevenir",root:"venir",correctPrefix:"pre",meaning:"–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—Ç—å",rootMeaning:"–ø—Ä–∏—Ö–æ–¥–∏—Ç—å"},
  {word:"prever",root:"ver",correctPrefix:"pre",meaning:"–ø—Ä–µ–¥–≤–∏–¥–µ—Ç—å",rootMeaning:"–≤–∏–¥–µ—Ç—å"},
  {word:"prejuicio",root:"juicio",correctPrefix:"pre",meaning:"–ø—Ä–µ–¥—Ä–∞—Å—Å—É–¥–æ–∫",rootMeaning:"—Å—É–∂–¥–µ–Ω–∏–µ"},
  {word:"deshacer",root:"hacer",correctPrefix:"des",meaning:"—Ä–∞–∑—Ä—É—à–∞—Ç—å",rootMeaning:"–¥–µ–ª–∞—Ç—å"},
  {word:"desconocido",root:"conocido",correctPrefix:"des",meaning:"–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π",rootMeaning:"–∑–Ω–∞–∫–æ–º—ã–π"},
  {word:"desaparecer",root:"aparecer",correctPrefix:"des",meaning:"–∏—Å—á–µ–∑–∞—Ç—å",rootMeaning:"–ø–æ—è–≤–ª—è—Ç—å—Å—è"},
  {word:"desorden",root:"orden",correctPrefix:"des",meaning:"–±–µ—Å–ø–æ—Ä—è–¥–æ–∫",rootMeaning:"–ø–æ—Ä—è–¥–æ–∫"},
  {word:"descubrir",root:"cubrir",correctPrefix:"des",meaning:"–æ—Ç–∫—Ä—ã–≤–∞—Ç—å",rootMeaning:"–ø–æ–∫—Ä—ã–≤–∞—Ç—å"},
  {word:"desconfiar",root:"confiar",correctPrefix:"des",meaning:"–Ω–µ –¥–æ–≤–µ—Ä—è—Ç—å",rootMeaning:"–¥–æ–≤–µ—Ä—è—Ç—å"},
  {word:"imposible",root:"posible",correctPrefix:"im",meaning:"–Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–π",rootMeaning:"–≤–æ–∑–º–æ–∂–Ω—ã–π"},
  {word:"incre√≠ble",root:"cre√≠ble",correctPrefix:"in",meaning:"–Ω–µ–≤–µ—Ä–æ—è—Ç–Ω—ã–π",rootMeaning:"–ø—Ä–∞–≤–¥–æ–ø–æ–¥–æ–±–Ω—ã–π"},
  {word:"invisible",root:"visible",correctPrefix:"in",meaning:"–Ω–µ–≤–∏–¥–∏–º—ã–π",rootMeaning:"–≤–∏–¥–∏–º—ã–π"},
  {word:"impaciente",root:"paciente",correctPrefix:"im",meaning:"–Ω–µ—Ç–µ—Ä–ø–µ–ª–∏–≤—ã–π",rootMeaning:"—Ç–µ—Ä–ø–µ–ª–∏–≤—ã–π"},
  {word:"injusto",root:"justo",correctPrefix:"in",meaning:"–Ω–µ—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–π",rootMeaning:"—Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–π"},
  {word:"inmortal",root:"mortal",correctPrefix:"in",meaning:"–±–µ—Å—Å–º–µ—Ä—Ç–Ω—ã–π",rootMeaning:"—Å–º–µ—Ä—Ç–Ω—ã–π"},
  {word:"repetir",root:"petir",correctPrefix:"re",meaning:"–ø–æ–≤—Ç–æ—Ä—è—Ç—å",rootMeaning:"–ø—Ä–æ—Å–∏—Ç—å"},
  {word:"reconstruir",root:"construir",correctPrefix:"re",meaning:"—Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞—Ç—å",rootMeaning:"—Å—Ç—Ä–æ–∏—Ç—å"},
  {word:"rehacer",root:"hacer",correctPrefix:"re",meaning:"–ø–µ—Ä–µ–¥–µ–ª—ã–≤–∞—Ç—å",rootMeaning:"–¥–µ–ª–∞—Ç—å"},
  {word:"regresar",root:"gresar",correctPrefix:"re",meaning:"–≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è",rootMeaning:"–∏–¥—Ç–∏"},
  {word:"releer",root:"leer",correctPrefix:"re",meaning:"–ø–µ—Ä–µ—á–∏—Ç—ã–≤–∞—Ç—å",rootMeaning:"—á–∏—Ç–∞—Ç—å"},
  {word:"internacional",root:"nacional",correctPrefix:"inter",meaning:"–º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π",rootMeaning:"–Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π"},
  {word:"intercambio",root:"cambio",correctPrefix:"inter",meaning:"–æ–±–º–µ–Ω",rootMeaning:"–ø–µ—Ä–µ–º–µ–Ω–∞"},
  {word:"interactuar",root:"actuar",correctPrefix:"inter",meaning:"–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å",rootMeaning:"–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å"},
  {word:"contradecir",root:"decir",correctPrefix:"contra",meaning:"–ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç—å",rootMeaning:"–≥–æ–≤–æ—Ä–∏—Ç—å"},
  {word:"contrabando",root:"bando",correctPrefix:"contra",meaning:"–∫–æ–Ω—Ç—Ä–∞–±–∞–Ω–¥–∞",rootMeaning:"–∑–∞–∫–æ–Ω"},
  {word:"contraataque",root:"ataque",correctPrefix:"contra",meaning:"–∫–æ–Ω—Ç—Ä–∞—Ç–∞–∫–∞",rootMeaning:"–∞—Ç–∞–∫–∞"},
  {word:"anteayer",root:"ayer",correctPrefix:"ante",meaning:"–ø–æ–∑–∞–≤—á–µ—Ä–∞",rootMeaning:"–≤—á–µ—Ä–∞"},
  {word:"antepasado",root:"pasado",correctPrefix:"ante",meaning:"–ø—Ä–µ–¥–æ–∫",rootMeaning:"–ø—Ä–æ—à–ª—ã–π"},
  {word:"antebrazo",root:"brazo",correctPrefix:"ante",meaning:"–ø—Ä–µ–¥–ø–ª–µ—á—å–µ",rootMeaning:"—Ä—É–∫–∞"},
  {word:"antibi√≥tico",root:"bi√≥tico",correctPrefix:"anti",meaning:"–∞–Ω—Ç–∏–±–∏–æ—Ç–∏–∫",rootMeaning:"–∂–∏–∑–Ω–µ–Ω–Ω—ã–π"},
  {word:"antisocial",root:"social",correctPrefix:"anti",meaning:"–∞–Ω—Ç–∏—Å–æ—Ü–∏–∞–ª—å–Ω—ã–π",rootMeaning:"—Å–æ—Ü–∏–∞–ª—å–Ω—ã–π"},
  {word:"multinacional",root:"nacional",correctPrefix:"multi",meaning:"–º–Ω–æ–≥–æ–Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π",rootMeaning:"–Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π"},
  {word:"multicolor",root:"color",correctPrefix:"multi",meaning:"–º–Ω–æ–≥–æ—Ü–≤–µ—Ç–Ω—ã–π",rootMeaning:"—Ü–≤–µ—Ç"},
  {word:"biling√ºe",root:"ling√ºe",correctPrefix:"bi",meaning:"–¥–≤—É—è–∑—ã—á–Ω—ã–π",rootMeaning:"—è–∑—ã–∫"},
  {word:"bicicleta",root:"cicleta",correctPrefix:"bi",meaning:"–≤–µ–ª–æ—Å–∏–ø–µ–¥",rootMeaning:"–∫–æ–ª–µ—Å–æ"},
  {word:"bilateral",root:"lateral",correctPrefix:"bi",meaning:"–¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π",rootMeaning:"—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π"},
  {word:"uniforme",root:"forme",correctPrefix:"uni",meaning:"—É–Ω–∏—Ñ–æ—Ä–º–∞",rootMeaning:"—Ñ–æ—Ä–º–∞"},
  {word:"mon√≥logo",root:"logo",correctPrefix:"mono",meaning:"–º–æ–Ω–æ–ª–æ–≥",rootMeaning:"—Å–ª–æ–≤–æ"},
  {word:"transportar",root:"portar",correctPrefix:"trans",meaning:"–ø–µ—Ä–µ–≤–æ–∑–∏—Ç—å",rootMeaning:"–Ω–µ—Å—Ç–∏"},
  {word:"transformar",root:"formar",correctPrefix:"trans",meaning:"–ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å",rootMeaning:"—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å"},
  {word:"transparente",root:"parente",correctPrefix:"trans",meaning:"–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π",rootMeaning:"—è–≤–ª—è—é—â–∏–π—Å—è"},
  {word:"autom√≥vil",root:"m√≥vil",correctPrefix:"auto",meaning:"–∞–≤—Ç–æ–º–æ–±–∏–ª—å",rootMeaning:"–¥–≤–∏–∂—É—â–∏–π—Å—è"},
  {word:"autoestima",root:"estima",correctPrefix:"auto",meaning:"—Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞",rootMeaning:"–æ—Ü–µ–Ω–∫–∞"},
  {word:"semic√≠rculo",root:"c√≠rculo",correctPrefix:"semi",meaning:"–ø–æ–ª—É–∫—Ä—É–≥",rootMeaning:"–∫—Ä—É–≥"},
  {word:"semifinal",root:"final",correctPrefix:"semi",meaning:"–ø–æ–ª—É—Ñ–∏–Ω–∞–ª",rootMeaning:"—Ñ–∏–Ω–∞–ª"},
  {word:"microscopio",root:"scopio",correctPrefix:"micro",meaning:"–º–∏–∫—Ä–æ—Å–∫–æ–ø",rootMeaning:"—Å–º–æ—Ç—Ä–µ—Ç—å"},
  {word:"microondas",root:"ondas",correctPrefix:"micro",meaning:"–º–∏–∫—Ä–æ–≤–æ–ª–Ω–æ–≤–∫–∞",rootMeaning:"–≤–æ–ª–Ω—ã"},
  {word:"tel√©fono",root:"fono",correctPrefix:"tele",meaning:"—Ç–µ–ª–µ—Ñ–æ–Ω",rootMeaning:"–∑–≤—É–∫"},
  {word:"televisi√≥n",root:"visi√≥n",correctPrefix:"tele",meaning:"—Ç–µ–ª–µ–≤–∏–¥–µ–Ω–∏–µ",rootMeaning:"–≤–∏–¥–µ–Ω–∏–µ"},
  {word:"telescopio",root:"scopio",correctPrefix:"tele",meaning:"—Ç–µ–ª–µ—Å–∫–æ–ø",rootMeaning:"—Å–º–æ—Ç—Ä–µ—Ç—å"},
  {word:"cooperar",root:"operar",correctPrefix:"co",meaning:"—Å–æ—Ç—Ä—É–¥–Ω–∏—á–∞—Ç—å",rootMeaning:"—Ä–∞–±–æ—Ç–∞—Ç—å"},
  {word:"convivir",root:"vivir",correctPrefix:"con",meaning:"—Å–æ—Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å",rootMeaning:"–∂–∏—Ç—å"},
];
const ALL_PREFIXES=["sub","extra","super","sobre","pre","des","in","im","re","inter","contra","ante","anti","multi","bi","uni","mono","trans","auto","semi","micro","tele","co","con"];
const PM={sub:"–ø–æ–¥, –Ω–∏–∂–µ",extra:"–≤–Ω–µ, —Å–≤–µ—Ä—Ö",super:"—Å–≤–µ—Ä—Ö, –Ω–∞–¥",sobre:"–Ω–∞–¥, —Å–≤–µ—Ä—Ö",pre:"–¥–æ, –ø–µ—Ä–µ–¥",des:"–æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ",in:"–Ω–µ, –±–µ–∑",im:"–Ω–µ, –±–µ–∑",re:"—Å–Ω–æ–≤–∞",inter:"–º–µ–∂–¥—É",contra:"–ø—Ä–æ—Ç–∏–≤",ante:"–ø–µ—Ä–µ–¥, –¥–æ",anti:"–ø—Ä–æ—Ç–∏–≤",multi:"–º–Ω–æ–≥–æ",bi:"–¥–≤–∞",uni:"–æ–¥–∏–Ω",mono:"–æ–¥–∏–Ω",trans:"—á–µ—Ä–µ–∑",auto:"—Å–∞–º",semi:"–ø–æ–ª—É-",micro:"–º–∞–ª–µ–Ω—å–∫–∏–π",tele:"–¥–∞–ª–µ–∫–æ",co:"–≤–º–µ—Å—Ç–µ",con:"–≤–º–µ—Å—Ç–µ"};
const TOTAL=12;
const YAY=["üéâ ¬°Excelente!","üí™ ¬°Muy bien!","üî• ¬°Perfecto!","‚≠ê ¬°Genial!","‚ú® ¬°Bravo!","üéØ ¬°Incre√≠ble!","üëè ¬°Fant√°stico!","üåü ¬°As√≠ se hace!"];
const NAY=["ü§î ¬°Casi!","üòÖ No pasa nada","üí° ¬°Sigue intentando!","üßê La pr√≥xima vez"];
let questions=[],current=0,score=0,streak=0,bestStreak=0,answered=false,history=[];
function shuffle(a){a=[...a];for(let i=a.length-1;i>0;i--){let j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}
function pick(a){return a[Math.floor(Math.random()*a.length)];}
function genQ(w){
  let wrong=shuffle(ALL_PREFIXES.filter(p=>p!==w.correctPrefix)).slice(0,3);
  let fake=wrong[0];
  return{...w,fakePrefix:fake,fakeWord:fake+w.root,options:shuffle([w.correctPrefix,...wrong])};
}
function show(id){document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));document.getElementById(id).classList.add('active');}
function startGame(){
  questions=shuffle(WORDS).slice(0,TOTAL).map(genQ);
  current=0;score=0;streak=0;bestStreak=0;answered=false;history=[];
  show('gameScreen');
  renderQ();
}
function renderQ(){
  const q=questions[current];
  answered=false;
  document.getElementById('roundNum').textContent=current+1;
  document.getElementById('scoreDisplay').textContent=score;
  document.getElementById('progressBar').style.width=(current/TOTAL*100)+'%';
  document.getElementById('streakBadge').style.display=streak>=2?'block':'none';
  document.getElementById('streakNum').textContent=streak;
  document.getElementById('fakePrefix').textContent=q.fakePrefix;
  document.getElementById('rootDisplay').textContent=q.root;
  document.getElementById('rootHint').textContent=q.root;
  document.getElementById('rootMeaning').textContent=q.rootMeaning;
  document.getElementById('explanationArea').style.display='none';
  const card=document.getElementById('wordCard');
  card.style.animation='none';card.offsetHeight;card.style.animation='popIn .4s ease';
  const grid=document.getElementById('optionsGrid');
  grid.innerHTML='';
  q.options.forEach(p=>{
    const btn=document.createElement('button');
    btn.className='btn opt-btn';
    btn.innerHTML=p+'- <span class="hint">'+PM[p]+'</span>';
    btn.onclick=()=>handleSelect(p);
    btn.dataset.prefix=p;
    grid.appendChild(btn);
  });
}
function handleSelect(prefix){
  if(answered)return;
  answered=true;
  const q=questions[current];
  const correct=prefix===q.correctPrefix;
  if(correct){score++;streak++;bestStreak=Math.max(bestStreak,streak);
    const sd=document.getElementById('scoreDisplay');sd.style.animation='none';sd.offsetHeight;sd.style.animation='popScore .4s ease';
    sd.textContent=score;
  } else {
    streak=0;
    const card=document.getElementById('wordCard');card.style.animation='none';card.offsetHeight;card.style.animation='shake .5s ease';
  }
  document.getElementById('streakBadge').style.display=streak>=2?'block':'none';
  document.getElementById('streakNum').textContent=streak;
  document.getElementById('progressBar').style.width=((current+1)/TOTAL*100)+'%';
  history.push({...q,userAnswer:prefix,correct});
  document.querySelectorAll('.opt-btn').forEach(btn=>{
    btn.disabled=true;
    const p=btn.dataset.prefix;
    if(p===q.correctPrefix)btn.className='btn opt-btn correct';
    else if(p===prefix&&!correct)btn.className='btn opt-btn wrong';
    else btn.className='btn opt-btn dimmed';
  });
  setTimeout(()=>{
    const area=document.getElementById('explanationArea');
    area.style.display='block';
    area.innerHTML=`
      <div class="expl-box ${correct?'ok':'no'}">
        <div style="font-size:20px;margin-bottom:6px;">${correct?pick(YAY):pick(NAY)}</div>
        <div style="font-size:24px;font-weight:800;color:#c084fc;margin-bottom:8px;">${q.word}</div>
        <div style="font-size:14px;color:#b8b3d0;line-height:1.7;">
          <span style="color:#ffd700;font-weight:600;">${q.correctPrefix}</span> (${PM[q.correctPrefix]})
          + <span style="font-weight:600;">${q.root}</span> (${q.rootMeaning})
          = <span style="color:#4ade80;font-weight:600;">${q.meaning}</span>
        </div>
      </div>
      <button class="btn main-btn" style="width:100%;font-size:16px;padding:14px;" onclick="nextQ()">
        ${current+1>=TOTAL?'–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã':'–î–∞–ª—å—à–µ ‚Üí'}
      </button>`;
  },400);
}
function nextQ(){
  if(current+1>=TOTAL){showResults();return;}
  current++;renderQ();
}
function showResults(){
  show('resultsScreen');
  const emoji=score>=10?'üèÜ':score>=7?'üåü':score>=4?'üí™':'üìö';
  const title=score>=10?'¬°Incre√≠ble!':score>=7?'¬°Muy bien!':score>=4?'¬°Buen trabajo!':'¬°Sigue practicando!';
  let histHTML=history.map(h=>`
    <div class="history-item ${h.correct?'ok':'no'}">
      <span style="font-size:16px">${h.correct?'‚úÖ':'‚ùå'}</span>
      <div style="flex:1;min-width:0">
        <div style="font-size:15px;font-weight:700;color:#e8e6f0">${h.word}</div>
        <div style="font-size:12px;color:#7a7590">${h.meaning}</div>
      </div>
      ${!h.correct?`<div style="font-size:12px;color:#f87171;text-align:right;flex-shrink:0">
        <span style="text-decoration:line-through">${h.userAnswer}-</span> ‚Üí <span style="color:#4ade80">${h.correctPrefix}-</span>
      </div>`:''}
    </div>`).join('');
  document.getElementById('resultsScreen').innerHTML=`
    <div style="animation:slideUp .6s ease">
      <div style="font-size:56px;margin-bottom:8px">${emoji}</div>
      <h2 style="font-size:30px;font-weight:800;margin:0 0 4px;
        background:linear-gradient(135deg,#ffd700,#c084fc);
        -webkit-background-clip:text;-webkit-text-fill-color:transparent;">${title}</h2>
      <div style="display:flex;justify-content:center;gap:32px;margin:24px 0;
        background:rgba(255,255,255,.04);border-radius:16px;padding:20px;
        border:1px solid rgba(255,255,255,.08)">
        <div>
          <div style="font-size:36px;font-weight:800;color:#c084fc">${score}/${TOTAL}</div>
          <div style="font-size:12px;color:#7a7590;margin-top:2px">–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö</div>
        </div>
        <div style="width:1px;background:rgba(255,255,255,.1)"></div>
        <div>
          <div style="font-size:36px;font-weight:800;color:#ffd700">${bestStreak}</div>
          <div style="font-size:12px;color:#7a7590;margin-top:2px">—Å–µ—Ä–∏—è üî•</div>
        </div>
      </div>
      <div style="text-align:left;margin-bottom:24px">
        <div style="font-size:14px;font-weight:600;color:#8a84a8;margin-bottom:12px">–†–∞–∑–±–æ—Ä –æ—Ç–≤–µ—Ç–æ–≤:</div>
        ${histHTML}
      </div>
      <button class="btn main-btn" onclick="startGame()">–ò–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑ üîÑ</button>
    </div>`;
}
</script>
</body>
</html>
